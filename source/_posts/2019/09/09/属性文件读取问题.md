---
title: 一次读取配置文件的探究
date: 2019-09-09 17:51:03
urlname: read_config
tags: [JAVA]
categories: JAVA
---

# 一次读取配置文件的探究
 
---

 

## 1. *问题的获取*

> 用App.class.getResourceAsStream(fileName)找不到配置文件，然后去看了一遍源码，发现App.class.getClassLoader().getResourceAsStream代码是有区别的，整理如下：
 
## 2. class.getResourceAsStream(fileName)说明

> - 相对路径：如果fileName不是用“/”开头的，则程序会找到Test这个类对应的目录去查找filename类
> - 绝对路径：如果fileName用“/”开头的，则程序会直接从根目录查找对应的文件去加载 
> - 详细可以查看源码Class.java 中方法getResourceAsStream

``` 
  具体为Class 中的 getResourceAsStream中的方法可以查看详细：
  resolveName(name)
```
## 3.classLoader.getResourceAsStream()

> - 是从类的根目录查找对应的文件，与当前的类路径无关
> - class中读取配置文件的方法也调用的这个方法
> - 寻找资源文件的时候调用ClassLoader中方法getResource查找
> - 具体查找文件方式为类加载器的双亲委托机制

## 4. ClassLoader查找文件规则**双亲委托模型**相关
1. 从根类加载器关联的路径找对应的文件
```
根类加载器对应的文件路径：String bootClassPath = System.getProperty("sun.boot.class.path");
```
2 . 从扩展类加载器查找文件
```
 扩展类加载器对应路径：System.out.println("ext:"+System.getProperty("java.ext.dirs"));
```
3 . 从应用类加载器-这部分包括我们自己项目的目录下所有的jar包和文件
```
System.out.println("app:"+System.getProperty("java.class.path"));
```

## 5. 那么三种加载器的属性文件在哪里设置的呢？
   所有系统属性可以通过下面的代码获取到，但是具体在什么地方设置的一直没有找到，留到以后探究吧。
```
打印java所有的系统环境变量：java.util.Properties properties = System.getProperties();
```

 



